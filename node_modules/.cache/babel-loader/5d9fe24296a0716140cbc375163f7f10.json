{"ast":null,"code":"import _regeneratorRuntime from\"D:/FrontEnd/Project/newMovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/FrontEnd/Project/newMovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/FrontEnd/Project/newMovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import logo from'../../../Assets/Images/logo.png';import Swal from'sweetalert2';import{getTicketRoom}from'../../../Redux/Actions/MovieManagerActions';import ChooseSeat from'./ChooseSeat';import TicketInfo from'./TicketInfo';import Button from'@mui/material/Button';import LogoutIcon from'@mui/icons-material/Logout';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TicketRoom(_ref){var _ticketRoom$thongTinP,_ticketRoom$thongTinP2;var props=_ref.props;var dispatch=useDispatch();var showtimeCode=props.match.params.showtimeCode;var ticketRoom=useSelector(function(state){return state.MovieManagerReducer.ticketRoom;});var _useState=useState(0),_useState2=_slicedToArray(_useState,2),seconds=_useState2[0],setSeconds=_useState2[1];var _useState3=useState(5),_useState4=_slicedToArray(_useState3,2),minutes=_useState4[0],setMinutes=_useState4[1];function resetTime(){if(minutes===0&&seconds===0){Swal.fire({title:'Đã hết thời gian giữ ghế.',text:\"Vui chọn ghế trong thời hạn 5 phút\",icon:'warning',showCancelButton:true,confirmButtonColor:'#3085d6',cancelButtonColor:'#d33',confirmButtonText:'Đặt vé lại',cancelButtonText:'Hủy'}).then(function(result){if(result.isConfirmed){window.location.reload();}else{props.history.push('/');}});}else{if(seconds===0){setMinutes(function(minutes){return minutes-1;});setSeconds(59);}else{setSeconds(function(seconds){return seconds-1;});}}}useEffect(function(){var token=setTimeout(resetTime,1000);return function cleanUp(){clearTimeout(token);};});useEffect(function(){if(showtimeCode){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=dispatch;_context.next=3;return getTicketRoom(showtimeCode);case 3:_context.t1=_context.sent;(0,_context.t0)(_context.t1);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();}},[dispatch,showtimeCode]);return/*#__PURE__*/_jsxs(\"div\",{className:\"ticketRoom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ticketRoom-left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"left-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header-info\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"header-logo\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"...\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-address\",children:[/*#__PURE__*/_jsx(\"h4\",{children:(_ticketRoom$thongTinP=ticketRoom.thongTinPhim)===null||_ticketRoom$thongTinP===void 0?void 0:_ticketRoom$thongTinP.tenCumRap}),/*#__PURE__*/_jsx(\"p\",{children:(_ticketRoom$thongTinP2=ticketRoom.thongTinPhim)===null||_ticketRoom$thongTinP2===void 0?void 0:_ticketRoom$thongTinP2.diaChi})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-countDown\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Th\\u1EDDi gian gi\\u1EEF gh\\u1EBF\"}),/*#__PURE__*/_jsxs(\"span\",{children:[String(Math.floor(minutes)).padStart(2,\"0\"),\":\",String(seconds).padStart(2,\"0\")]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"left-body\",children:[/*#__PURE__*/_jsx(ChooseSeat,{}),/*#__PURE__*/_jsx(\"a\",{className:\"left-goback\",href:\"/\",children:/*#__PURE__*/_jsxs(Button,{variant:\"contained\",color:\"inherit\",children:[\"Trang ch\\u1EE7 \\xA0\",/*#__PURE__*/_jsx(LogoutIcon,{})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ticketRoom-right\",children:/*#__PURE__*/_jsx(TicketInfo,{showtimeCode:showtimeCode})})]});}export default/*#__PURE__*/React.memo(TicketRoom);","map":{"version":3,"sources":["D:/FrontEnd/Project/newMovie/src/Pages/MovieDetails/TicketRoom-details/TicketRoom.js"],"names":["React","useEffect","useState","useDispatch","useSelector","logo","Swal","getTicketRoom","ChooseSeat","TicketInfo","Button","LogoutIcon","TicketRoom","props","dispatch","showtimeCode","match","params","ticketRoom","state","MovieManagerReducer","seconds","setSeconds","minutes","setMinutes","resetTime","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","window","location","reload","history","push","token","setTimeout","cleanUp","clearTimeout","fetchData","thongTinPhim","tenCumRap","diaChi","String","Math","floor","padStart","memo"],"mappings":"sbAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,MAAOC,CAAAA,IAAP,KAAiB,iCAAjB,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CACA,OAASC,aAAT,KAA8B,4CAA9B,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,4BAAvB,C,wFAEA,QAASC,CAAAA,UAAT,MAA+B,qDAATC,CAAAA,KAAS,MAATA,KAAS,CAC3B,GAAMC,CAAAA,QAAQ,CAAGX,WAAW,EAA5B,CACA,GAAMY,CAAAA,YAAY,CAAGF,KAAK,CAACG,KAAN,CAAYC,MAAZ,CAAmBF,YAAxC,CACA,GAAMG,CAAAA,UAAU,CAAGd,WAAW,CAAC,SAAAe,KAAK,QAAIA,CAAAA,KAAK,CAACC,mBAAN,CAA0BF,UAA9B,EAAN,CAA9B,CACA,cAA8BhB,QAAQ,CAAC,CAAD,CAAtC,wCAAOmB,OAAP,eAAgBC,UAAhB,eACA,eAA8BpB,QAAQ,CAAC,CAAD,CAAtC,yCAAOqB,OAAP,eAAgBC,UAAhB,eACA,QAASC,CAAAA,SAAT,EAAqB,CACjB,GAAIF,OAAO,GAAK,CAAZ,EAAiBF,OAAO,GAAK,CAAjC,CAAoC,CAChCf,IAAI,CAACoB,IAAL,CAAU,CACNC,KAAK,CAAE,2BADD,CAENC,IAAI,CAAE,oCAFA,CAGNC,IAAI,CAAE,SAHA,CAINC,gBAAgB,CAAE,IAJZ,CAKNC,kBAAkB,CAAE,SALd,CAMNC,iBAAiB,CAAE,MANb,CAONC,iBAAiB,CAAE,YAPb,CAQNC,gBAAgB,CAAE,KARZ,CAAV,EASGC,IATH,CASQ,SAACC,MAAD,CAAY,CAChB,GAAIA,MAAM,CAACC,WAAX,CAAwB,CACpBC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACH,CAFD,IAEO,CACH3B,KAAK,CAAC4B,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACH,CACJ,CAfD,EAgBH,CAjBD,IAkBK,CACD,GAAIrB,OAAO,GAAK,CAAhB,CAAmB,CACfG,UAAU,CAAC,SAAAD,OAAO,QAAIA,CAAAA,OAAO,CAAG,CAAd,EAAR,CAAV,CACAD,UAAU,CAAC,EAAD,CAAV,CACH,CAHD,IAGO,CACHA,UAAU,CAAC,SAAAD,OAAO,QAAIA,CAAAA,OAAO,CAAG,CAAd,EAAR,CAAV,CACH,CACJ,CACJ,CACDpB,SAAS,CAAC,UAAM,CACZ,GAAM0C,CAAAA,KAAK,CAAGC,UAAU,CAACnB,SAAD,CAAY,IAAZ,CAAxB,CACA,MAAO,SAASoB,CAAAA,OAAT,EAAmB,CACtBC,YAAY,CAACH,KAAD,CAAZ,CACH,CAFD,CAGH,CALQ,CAAT,CAMA1C,SAAS,CAAC,UAAM,CACZ,GAAIc,YAAJ,CAAkB,IACCgC,CAAAA,SADD,2FACd,+IACIjC,QADJ,uBACmBP,CAAAA,aAAa,CAACQ,YAAD,CADhC,qHADc,kBACCgC,CAAAA,SADD,4CAIdA,SAAS,GACZ,CACJ,CAPQ,CAON,CAACjC,QAAD,CAAWC,YAAX,CAPM,CAAT,CAQA,mBACI,aAAK,SAAS,CAAC,YAAf,wBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,aAAK,SAAS,CAAC,aAAf,wBACI,aAAK,SAAS,CAAC,aAAf,wBACI,UAAG,IAAI,CAAC,GAAR,CAAY,SAAS,CAAC,aAAtB,uBACI,YAAK,GAAG,CAAEV,IAAV,CAAgB,GAAG,CAAC,KAApB,EADJ,EADJ,cAII,aAAK,SAAS,CAAC,gBAAf,wBACI,2CAAKa,UAAU,CAAC8B,YAAhB,gDAAK,sBAAyBC,SAA9B,EADJ,cAEI,2CAAI/B,UAAU,CAAC8B,YAAf,iDAAI,uBAAyBE,MAA7B,EAFJ,GAJJ,GADJ,cAUI,aAAK,SAAS,CAAC,kBAAf,wBACI,uDADJ,cAEI,wBAAOC,MAAM,CAACC,IAAI,CAACC,KAAL,CAAW9B,OAAX,CAAD,CAAN,CAA4B+B,QAA5B,CAAqC,CAArC,CAAwC,GAAxC,CAAP,KAAsDH,MAAM,CAAC9B,OAAD,CAAN,CAAgBiC,QAAhB,CAAyB,CAAzB,CAA4B,GAA5B,CAAtD,GAFJ,GAVJ,GADJ,cAgBI,aAAK,SAAS,CAAC,WAAf,wBACI,KAAC,UAAD,IADJ,cAEI,UAAG,SAAS,CAAC,aAAb,CAA2B,IAAI,CAAC,GAAhC,uBACI,MAAC,MAAD,EAAQ,OAAO,CAAC,WAAhB,CAA4B,KAAK,CAAC,SAAlC,8CACoB,KAAC,UAAD,IADpB,GADJ,EAFJ,GAhBJ,GADJ,cA0BI,YAAK,SAAS,CAAC,kBAAf,uBACI,KAAC,UAAD,EAAY,YAAY,CAAEvC,YAA1B,EADJ,EA1BJ,GADJ,CAgCH,CACD,2BAAef,KAAK,CAACuD,IAAN,CAAW3C,UAAX,CAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport logo from '../../../Assets/Images/logo.png'\r\nimport Swal from 'sweetalert2'\r\nimport { getTicketRoom } from '../../../Redux/Actions/MovieManagerActions'\r\nimport ChooseSeat from './ChooseSeat'\r\nimport TicketInfo from './TicketInfo'\r\nimport Button from '@mui/material/Button';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\n\r\nfunction TicketRoom({ props }) {\r\n    const dispatch = useDispatch()\r\n    const showtimeCode = props.match.params.showtimeCode\r\n    const ticketRoom = useSelector(state => state.MovieManagerReducer.ticketRoom)\r\n    const [seconds, setSeconds] = useState(0)\r\n    const [minutes, setMinutes] = useState(5)\r\n    function resetTime() {\r\n        if (minutes === 0 && seconds === 0) {\r\n            Swal.fire({\r\n                title: 'Đã hết thời gian giữ ghế.',\r\n                text: \"Vui chọn ghế trong thời hạn 5 phút\",\r\n                icon: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonColor: '#3085d6',\r\n                cancelButtonColor: '#d33',\r\n                confirmButtonText: 'Đặt vé lại',\r\n                cancelButtonText: 'Hủy'\r\n            }).then((result) => {\r\n                if (result.isConfirmed) {\r\n                    window.location.reload();\r\n                } else {\r\n                    props.history.push('/')\r\n                }\r\n            })\r\n        }\r\n        else {\r\n            if (seconds === 0) {\r\n                setMinutes(minutes => minutes - 1);\r\n                setSeconds(59);\r\n            } else {\r\n                setSeconds(seconds => seconds - 1);\r\n            }\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        const token = setTimeout(resetTime, 1000)\r\n        return function cleanUp() {\r\n            clearTimeout(token);\r\n        }\r\n    })\r\n    useEffect(() => {\r\n        if (showtimeCode) {\r\n            async function fetchData() {\r\n                dispatch(await getTicketRoom(showtimeCode))\r\n            }\r\n            fetchData();\r\n        }\r\n    }, [dispatch, showtimeCode])\r\n    return (\r\n        <div className='ticketRoom'>\r\n            <div className='ticketRoom-left'>\r\n                <div className='left-header'>\r\n                    <div className='header-info'>\r\n                        <a href='/' className='header-logo'>\r\n                            <img src={logo} alt='...' />\r\n                        </a>\r\n                        <div className='header-address'>\r\n                            <h4>{ticketRoom.thongTinPhim?.tenCumRap}</h4>\r\n                            <p>{ticketRoom.thongTinPhim?.diaChi}</p>\r\n                        </div>\r\n                    </div>\r\n                    <div className='header-countDown'>\r\n                        <p>Thời gian giữ ghế</p>\r\n                        <span>{String(Math.floor(minutes)).padStart(2, \"0\")}:{String(seconds).padStart(2, \"0\")}</span>\r\n                    </div>\r\n                </div>\r\n                <div className='left-body'>\r\n                    <ChooseSeat />\r\n                    <a className='left-goback' href='/'>\r\n                        <Button variant=\"contained\" color='inherit'>\r\n                            Trang chủ &nbsp;<LogoutIcon />\r\n                        </Button>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div className='ticketRoom-right'>\r\n                <TicketInfo showtimeCode={showtimeCode} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default React.memo(TicketRoom);\r\n\r\n"]},"metadata":{},"sourceType":"module"}