{"ast":null,"code":"var _jsxFileName = \"D:\\\\FrontEnd\\\\Project\\\\newMovie\\\\src\\\\Pages\\\\Admin\\\\Movie\\\\EditMovie.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable react-hooks/rules-of-hooks */\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\nimport DatePicker from '@mui/lab/DatePicker';\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\nimport Box from '@mui/material/Box';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogTitle from '@mui/material/DialogTitle';\nimport TextField from '@mui/material/TextField';\nimport { isEmpty } from 'lodash';\nimport moment from 'moment';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getInfoMovie, updateMovie } from '../../../Redux/Actions/MovieManagerActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function EditMovie(_ref) {\n  _s();\n\n  let {\n    open,\n    handleClose,\n    movieCode\n  } = _ref;\n  const movieInfo = useSelector(state => state.MovieManagerReducer.movieInfo);\n  const dispatch = useDispatch();\n  const [imgSrc, setImgSrc] = useState();\n  const [date, setDate] = React.useState(null);\n  const [dataMovie, setDataMovie] = useState({\n    tenPhim: '',\n    trailer: '',\n    ngayKhoiChieu: '',\n    danhGia: null,\n    moTa: '',\n    hinhAnh: {},\n    biDanh: '',\n    maNhom: 'GP01'\n  });\n  const inputAdd = useRef(null);\n\n  const onAdd = () => {\n    inputAdd.current.click();\n  };\n\n  const onSelectDate = newDate => {\n    let newDataMovie = { ...dataMovie,\n      ngayKhoiChieu: moment(newDate).format('DD/MM/YYYY')\n    };\n    setDate(newDate);\n    setDataMovie(newDataMovie);\n  };\n\n  const onChangeInput = event => {\n    let {\n      name,\n      value\n    } = event.target;\n\n    if (name !== 'hinhAnh') {\n      let newDataMovie = { ...dataMovie,\n        [name]: value\n      };\n      setDataMovie(newDataMovie);\n    } else {\n      let newImgSrc = event.target.files[0];\n\n      if (newImgSrc.type === 'image/png' || newImgSrc.type === 'image/jpg' || newImgSrc.type === 'image/gif' || newImgSrc.type === 'image/jpeg') {\n        let newDataMovie = { ...dataMovie,\n          [name]: newImgSrc\n        };\n        setDataMovie(newDataMovie);\n        setImgSrc(URL.createObjectURL(newImgSrc));\n      }\n    }\n  };\n\n  const onSubmit = () => {\n    // ------xoa khoang trang thua\n    Object.keys(dataMovie).map(key => {\n      return dataMovie[key] = String(dataMovie[key]).trim();\n    }); // ---------------------------\n\n    let form_data = new FormData();\n\n    for (let key in dataMovie) {\n      form_data.append(key, dataMovie[key]);\n    }\n\n    dispatch(updateMovie(form_data));\n    handleClose();\n  };\n\n  useEffect(() => {\n    if (!isEmpty(movieInfo)) {\n      let newDataUpdate = {\n        tenPhim: movieInfo.tenPhim,\n        trailer: movieInfo.trailer,\n        ngayKhoiChieu: moment(movieInfo.ngayKhoiChieu).format('DD/MM/YYYY'),\n        danhGia: movieInfo.danhGia,\n        moTa: movieInfo.moTa,\n        hinhAnh: movieInfo.hinhAnh,\n        biDanh: movieInfo.biDanh,\n        maNhom: movieInfo.maNhom\n      };\n      setImgSrc(movieInfo.hinhAnh);\n      setDate(moment(movieInfo.ngayKhoiChieu).format());\n      setDataMovie(newDataUpdate);\n    }\n  }, [movieInfo]);\n  useEffect(() => {\n    if (movieCode) {\n      async function fetchData() {\n        dispatch(await getInfoMovie(movieCode));\n      }\n\n      fetchData();\n    }\n  }, [dispatch, movieCode]);\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    fullWidth: true,\n    maxWidth: \"md\",\n    open: open,\n    keepMounted: true,\n    onClose: handleClose,\n    \"aria-describedby\": \"alert-dialog-slide-description\",\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      sx: {\n        fontSize: '30px'\n      },\n      children: \"Sửa phim\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      dividers: true,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'start',\n          '& .MuiTextField-root': {\n            mb: 2,\n            width: '100%'\n          },\n          '& .MuiOutlinedInput-root, .MuiInputLabel-root': {\n            fontSize: '15px'\n          },\n          '& .form-left': {\n            width: '60%'\n          },\n          '& .form-right': {\n            width: '37%'\n          },\n          '& .MuiButton-root': {\n            display: 'block',\n            mb: 2,\n            fontSize: '15px',\n            backgroundColor: '#d7d7d7',\n            color: '#616161',\n            width: '100%'\n          }\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-left\",\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            name: \"tenPhim\",\n            label: \"T\\xEAn Phim\",\n            variant: \"outlined\",\n            onChange: onChangeInput,\n            value: dataMovie.tenPhim,\n            defaultValue: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            name: \"trailer\",\n            label: \"Trailer\",\n            variant: \"outlined\",\n            onChange: onChangeInput,\n            value: dataMovie.trailer,\n            defaultValue: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            name: \"biDanh\",\n            label: \"B\\xED Danh\",\n            variant: \"outlined\",\n            onChange: onChangeInput,\n            value: dataMovie.biDanh,\n            defaultValue: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            name: \"danhGia\",\n            label: \"\\u0110\\xE1nh gi\\xE1\",\n            variant: \"outlined\",\n            type: \"number\",\n            onChange: onChangeInput,\n            value: dataMovie.danhGia,\n            defaultValue: \"0\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            name: \"maNhom\",\n            label: \"M\\xE3 nh\\xF3m\",\n            value: \"GP01\",\n            disabled: true,\n            variant: \"outlined\",\n            onChange: onChangeInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            name: \"moTa\",\n            label: \"M\\xF4 t\\u1EA3\",\n            multiline: true,\n            rows: 3,\n            variant: \"outlined\",\n            onChange: onChangeInput,\n            value: dataMovie.moTa,\n            defaultValue: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-right\",\n          children: [/*#__PURE__*/_jsxDEV(LocalizationProvider, {\n            dateAdapter: AdapterDateFns,\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {\n              label: \"Ng\\xE0y kh\\u1EDFi chi\\u1EBFu\",\n              value: date,\n              name: \"ngayKhoiChieu\",\n              onChange: newDate => onSelectDate(newDate),\n              renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 58\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: () => onAdd(),\n            children: \"T\\u1EA3i \\u1EA3nh l\\xEAn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"hinhAnh\",\n            type: \"file\",\n            hidden: true,\n            ref: inputAdd,\n            onChange: onChangeInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: '100%'\n            },\n            src: imgSrc,\n            alt: \"thumbnail\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"error\",\n        onClick: handleClose,\n        children: \"H\\u1EE7y\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: onSubmit,\n        type: \"submit\",\n        children: \"C\\u1EADp nh\\u1EADt\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n}\n\n_s(EditMovie, \"z6En9nHIo7e5JDWr+t44tK9gj7U=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = EditMovie;\n;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditMovie\");","map":{"version":3,"sources":["D:/FrontEnd/Project/newMovie/src/Pages/Admin/Movie/EditMovie.js"],"names":["AdapterDateFns","DatePicker","LocalizationProvider","Box","Button","Dialog","DialogActions","DialogContent","DialogTitle","TextField","isEmpty","moment","React","useEffect","useRef","useState","useDispatch","useSelector","getInfoMovie","updateMovie","EditMovie","open","handleClose","movieCode","movieInfo","state","MovieManagerReducer","dispatch","imgSrc","setImgSrc","date","setDate","dataMovie","setDataMovie","tenPhim","trailer","ngayKhoiChieu","danhGia","moTa","hinhAnh","biDanh","maNhom","inputAdd","onAdd","current","click","onSelectDate","newDate","newDataMovie","format","onChangeInput","event","name","value","target","newImgSrc","files","type","URL","createObjectURL","onSubmit","Object","keys","map","key","String","trim","form_data","FormData","append","newDataUpdate","fetchData","fontSize","display","justifyContent","alignItems","mb","width","backgroundColor","color","params"],"mappings":"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","sourcesContent":["/* eslint-disable react-hooks/rules-of-hooks */\r\nimport AdapterDateFns from '@mui/lab/AdapterDateFns';\r\nimport DatePicker from '@mui/lab/DatePicker';\r\nimport LocalizationProvider from '@mui/lab/LocalizationProvider';\r\nimport Box from '@mui/material/Box';\r\nimport Button from '@mui/material/Button';\r\nimport Dialog from '@mui/material/Dialog';\r\nimport DialogActions from '@mui/material/DialogActions';\r\nimport DialogContent from '@mui/material/DialogContent';\r\nimport DialogTitle from '@mui/material/DialogTitle';\r\nimport TextField from '@mui/material/TextField';\r\nimport { isEmpty } from 'lodash';\r\nimport moment from 'moment';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getInfoMovie, updateMovie } from '../../../Redux/Actions/MovieManagerActions';\r\n\r\n\r\nexport default function EditMovie({ open, handleClose, movieCode }) {\r\n    const movieInfo = useSelector(state => state.MovieManagerReducer.movieInfo)\r\n    const dispatch = useDispatch()\r\n    const [imgSrc, setImgSrc] = useState();\r\n    const [date, setDate] = React.useState(null);\r\n    const [dataMovie, setDataMovie] = useState({\r\n        tenPhim: '',\r\n        trailer: '',\r\n        ngayKhoiChieu: '',\r\n        danhGia: null,\r\n        moTa: '',\r\n        hinhAnh: {},\r\n        biDanh: '',\r\n        maNhom: 'GP01',\r\n    })\r\n    const inputAdd = useRef(null);\r\n    const onAdd = () => {\r\n        inputAdd.current.click();\r\n    };\r\n    const onSelectDate = (newDate) => {\r\n        let newDataMovie = { ...dataMovie, ngayKhoiChieu: moment(newDate).format('DD/MM/YYYY') }\r\n        setDate(newDate)\r\n        setDataMovie(newDataMovie)\r\n    }\r\n    const onChangeInput = (event) => {\r\n        let { name, value } = event.target\r\n        if (name !== 'hinhAnh') {\r\n            let newDataMovie = { ...dataMovie, [name]: value }\r\n            setDataMovie(newDataMovie)\r\n        } else {\r\n            let newImgSrc = event.target.files[0]\r\n            if (newImgSrc.type === 'image/png' || newImgSrc.type === 'image/jpg' || newImgSrc.type === 'image/gif' || newImgSrc.type === 'image/jpeg') {\r\n                let newDataMovie = { ...dataMovie, [name]: newImgSrc }\r\n                setDataMovie(newDataMovie)\r\n                setImgSrc(URL.createObjectURL(newImgSrc))\r\n            }\r\n        }\r\n    }\r\n    const onSubmit = () => {\r\n        // ------xoa khoang trang thua\r\n        Object.keys(dataMovie).map((key) => {\r\n            return dataMovie[key] = String(dataMovie[key]).trim()\r\n        });\r\n        // ---------------------------\r\n        let form_data = new FormData();\r\n        for (let key in dataMovie) {\r\n            form_data.append(key, dataMovie[key]);\r\n        }\r\n        dispatch(updateMovie(form_data))\r\n        handleClose()\r\n    }\r\n    useEffect(() => {\r\n        if (!isEmpty(movieInfo)) {\r\n            let newDataUpdate = {\r\n                tenPhim: movieInfo.tenPhim,\r\n                trailer: movieInfo.trailer,\r\n                ngayKhoiChieu: moment(movieInfo.ngayKhoiChieu).format('DD/MM/YYYY'),\r\n                danhGia: movieInfo.danhGia,\r\n                moTa: movieInfo.moTa,\r\n                hinhAnh: movieInfo.hinhAnh,\r\n                biDanh: movieInfo.biDanh,\r\n                maNhom: movieInfo.maNhom,\r\n            }\r\n            setImgSrc(movieInfo.hinhAnh)\r\n            setDate(moment(movieInfo.ngayKhoiChieu).format())\r\n            setDataMovie(newDataUpdate)\r\n        }\r\n    }, [movieInfo])\r\n    useEffect(() => {\r\n        if (movieCode) {\r\n            async function fetchData() {\r\n                dispatch(await getInfoMovie(movieCode))\r\n            }\r\n            fetchData();\r\n        }\r\n    }, [dispatch, movieCode])\r\n    return (\r\n        <Dialog\r\n            fullWidth\r\n            maxWidth='md'\r\n            open={open}\r\n            keepMounted\r\n            onClose={handleClose}\r\n            aria-describedby=\"alert-dialog-slide-description\"\r\n        >\r\n            <DialogTitle sx={{ fontSize: '30px' }}>{\"Sửa phim\"}</DialogTitle>\r\n            <DialogContent dividers>\r\n                <Box sx={{\r\n                    display: 'flex',\r\n                    justifyContent: 'space-between',\r\n                    alignItems: 'start',\r\n                    '& .MuiTextField-root': { mb: 2, width: '100%' },\r\n                    '& .MuiOutlinedInput-root, .MuiInputLabel-root': { fontSize: '15px' },\r\n                    '& .form-left': { width: '60%' },\r\n                    '& .form-right': { width: '37%' },\r\n                    '& .MuiButton-root': { display: 'block', mb: 2, fontSize: '15px', backgroundColor: '#d7d7d7', color: '#616161', width: '100%' },\r\n                }}>\r\n                    <div className='form-left'>\r\n                        <TextField name='tenPhim' label=\"Tên Phim\" variant=\"outlined\" onChange={onChangeInput} value={dataMovie.tenPhim} defaultValue='Loading...' />\r\n                        <TextField name='trailer' label=\"Trailer\" variant=\"outlined\" onChange={onChangeInput} value={dataMovie.trailer} defaultValue='Loading...' />\r\n                        <TextField name='biDanh' label=\"Bí Danh\" variant=\"outlined\" onChange={onChangeInput} value={dataMovie.biDanh} defaultValue='Loading...' />\r\n                        <TextField name='danhGia' label=\"Đánh giá\" variant=\"outlined\" type='number' onChange={onChangeInput} value={dataMovie.danhGia} defaultValue='0' />\r\n                        <TextField name='maNhom' label=\"Mã nhóm\" value='GP01' disabled variant=\"outlined\" onChange={onChangeInput} />\r\n                        <TextField name='moTa' label=\"Mô tả\" multiline rows={3} variant=\"outlined\" onChange={onChangeInput} value={dataMovie.moTa} defaultValue='Loading...' />\r\n                    </div>\r\n                    <div className='form-right'>\r\n                        <LocalizationProvider dateAdapter={AdapterDateFns}>\r\n                            <DatePicker\r\n                                label=\"Ngày khởi chiếu\"\r\n                                value={date}\r\n                                name='ngayKhoiChieu'\r\n                                onChange={(newDate) => onSelectDate(newDate)}\r\n                                renderInput={(params) => <TextField {...params} />}\r\n                            />\r\n                        </LocalizationProvider>\r\n                        <Button variant='contained' onClick={() => onAdd()} >\r\n                            Tải ảnh lên\r\n                        </Button>\r\n                        <input name='hinhAnh' type='file' hidden ref={inputAdd} onChange={onChangeInput} />\r\n                        <img style={{ width: '100%' }} src={imgSrc} alt='thumbnail' />\r\n                    </div>\r\n                </Box>\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button variant='contained' color='error' onClick={handleClose} >Hủy</Button>\r\n                <Button variant='contained' color='primary' onClick={onSubmit} type='submit'>Cập nhật</Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n\r\n    );\r\n};"]},"metadata":{},"sourceType":"module"}