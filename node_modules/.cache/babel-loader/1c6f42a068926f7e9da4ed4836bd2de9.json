{"ast":null,"code":"import _slicedToArray from\"D:/FrontEnd/Project/newMovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import DeleteIcon from'@mui/icons-material/Delete';import EditIcon from'@mui/icons-material/Edit';import Button from'@mui/material/Button';import IconButton from'@mui/material/IconButton';import{Input,Table}from'antd';import React,{Fragment,useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import Swal from'sweetalert2';import{deleteMovie}from'../../../Redux/Actions/MovieManagerActions';import AddMovie from'./AddMovie';import CreateShowtime from'./Create-Showtime';import EditMovie from'./EditMovie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AdminMovieManager(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),movieCode=_useState2[0],setMovieCode=_useState2[1];// DIALOG\nvar _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);setMovieCode();};var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openCreateST=_useState4[0],setOpenCreateST=_useState4[1];var handleClickOpenCreateST=function handleClickOpenCreateST(movieCode){setMovieCode(movieCode);setOpenCreateST(true);};var handleCloseCreateST=function handleCloseCreateST(){setOpenCreateST(false);};var dispatch=useDispatch();var Search=Input.Search;var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var moviesList=useSelector(function(state){return state.MovieManagerReducer.moviesList;});useEffect(function(){if(moviesList){setData(moviesList);}},[moviesList]);var _onSearch=function onSearch(keyWord){if(keyWord){var newData=moviesList.filter(function(item){return item.tenPhim.toLowerCase().indexOf(keyWord)!==-1;});setData(newData);}else{setData(moviesList);}};var onDelete=function onDelete(movieCode){Swal.fire({title:'Bạn có chắc muốn xóa ?',icon:'warning',showCancelButton:true,confirmButtonColor:'#3085d6',cancelButtonColor:'#d33',confirmButtonText:'Xác nhận',cancelButtonText:'Hủy'}).then(function(result){if(result.isConfirmed){dispatch(deleteMovie(movieCode));}});};var editMovie=function editMovie(movieCode){setOpen(true);setMovieCode(movieCode);};var columns=[{title:'Mã phim',dataIndex:'maPhim',sorter:function sorter(a,b){return a.maPhim-b.maPhim;},sortDirections:['descend'],width:\"15%\"},{title:'Hình ảnh',dataIndex:'hinhAnh',width:\"15%\",render:function render(hinhAnh,index){return/*#__PURE__*/_jsx(\"img\",{src:hinhAnh,alt:hinhAnh,width:60,height:80},index);}},{title:'Tên phim',dataIndex:'tenPhim',defaultSortOrder:'descend',width:'25%'},{title:'Mô tả',dataIndex:'moTa',width:'25%',render:function render(moTa,index){return/*#__PURE__*/_jsx(Fragment,{children:moTa.length>50?moTa.substr(0,100)+'...':moTa},index);}},{title:'Chỉnh sửa',className:'adminEdit',dataIndex:'maPhim',width:'20%',render:function render(maPhim,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"adminEdit\",children:[/*#__PURE__*/_jsx(IconButton,{color:\"primary\",\"aria-label\":\"primary\",size:\"large\",onClick:function onClick(){return editMovie(maPhim);},children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsx(IconButton,{color:\"error\",\"aria-label\":\"delete\",size:\"large\",onClick:function onClick(){return onDelete(maPhim);},children:/*#__PURE__*/_jsx(DeleteIcon,{})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"success\",onClick:function onClick(){return handleClickOpenCreateST(maPhim);},children:\"T\\u1EA1o l\\u1ECBch chi\\u1EBFu\"})]},index);}}];return/*#__PURE__*/_jsxs(\"div\",{className:\"adminMovieManager\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Qu\\u1EA3n l\\xFD phim\"}),/*#__PURE__*/_jsx(Button,{className:\"btn-add\",variant:\"contained\",onClick:handleClickOpen,children:\"Th\\xEAm phim\"}),movieCode?/*#__PURE__*/_jsx(EditMovie,{open:open,handleClose:handleClose,movieCode:movieCode}):/*#__PURE__*/_jsx(AddMovie,{open:open,handleClose:handleClose}),/*#__PURE__*/_jsx(CreateShowtime,{open:openCreateST,handleClose:handleCloseCreateST,movieCode:movieCode}),/*#__PURE__*/_jsx(Search,{className:\"mt-4 mb-4\",placeholder:\"Nh\\u1EADp t\\xEAn phim c\\u1EA7n t\\xECm\",enterButton:\"T\\xECm ki\\u1EBFm\",size:\"large\",onSearch:function onSearch(keyWord){return _onSearch(keyWord);}}),/*#__PURE__*/_jsx(Table,{pagination:{defaultPageSize:5},columns:columns,dataSource:data})]});}","map":{"version":3,"sources":["D:/FrontEnd/Project/newMovie/src/Pages/Admin/Movie/Admin-MovieManager.js"],"names":["DeleteIcon","EditIcon","Button","IconButton","Input","Table","React","Fragment","useEffect","useState","useDispatch","useSelector","Swal","deleteMovie","AddMovie","CreateShowtime","EditMovie","AdminMovieManager","movieCode","setMovieCode","open","setOpen","handleClickOpen","handleClose","openCreateST","setOpenCreateST","handleClickOpenCreateST","handleCloseCreateST","dispatch","Search","data","setData","moviesList","state","MovieManagerReducer","onSearch","keyWord","newData","filter","item","tenPhim","toLowerCase","indexOf","onDelete","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","then","result","isConfirmed","editMovie","columns","dataIndex","sorter","a","b","maPhim","sortDirections","width","render","hinhAnh","index","defaultSortOrder","moTa","length","substr","className","defaultPageSize"],"mappings":"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","sourcesContent":["import DeleteIcon from '@mui/icons-material/Delete';\r\nimport EditIcon from '@mui/icons-material/Edit';\r\nimport Button from '@mui/material/Button';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport { Input, Table } from 'antd';\r\nimport React, { Fragment, useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport Swal from 'sweetalert2';\r\nimport { deleteMovie } from '../../../Redux/Actions/MovieManagerActions';\r\nimport AddMovie from './AddMovie';\r\nimport CreateShowtime from './Create-Showtime';\r\nimport EditMovie from './EditMovie';\r\n\r\nexport default function AdminMovieManager() {\r\n    const [movieCode, setMovieCode] = useState()\r\n\r\n    // DIALOG\r\n    const [open, setOpen] = React.useState(false);\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n        setMovieCode()\r\n    };\r\n    const [openCreateST, setOpenCreateST] = useState(false)\r\n    const handleClickOpenCreateST = (movieCode) => {\r\n        setMovieCode(movieCode)\r\n        setOpenCreateST(true);\r\n    };\r\n    const handleCloseCreateST = () => {\r\n        setOpenCreateST(false);\r\n    };\r\n    const dispatch = useDispatch()\r\n    const { Search } = Input;\r\n    const [data, setData] = useState()\r\n    const moviesList = useSelector(state => state.MovieManagerReducer.moviesList)\r\n    useEffect(() => {\r\n        if (moviesList) {\r\n            setData(moviesList)\r\n        }\r\n    }, [moviesList])\r\n    const onSearch = (keyWord) => {\r\n        if (keyWord) {\r\n            let newData = moviesList.filter((item) => {\r\n                return item.tenPhim.toLowerCase().indexOf(keyWord) !== -1\r\n            })\r\n            setData(newData)\r\n        } else {\r\n            setData(moviesList)\r\n        }\r\n\r\n    }\r\n    const onDelete = (movieCode) => {\r\n        Swal.fire({\r\n            title: 'Bạn có chắc muốn xóa ?',\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Xác nhận',\r\n            cancelButtonText: 'Hủy'\r\n        }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                dispatch(deleteMovie(movieCode))\r\n            }\r\n        })\r\n    }\r\n    const editMovie = (movieCode) => {\r\n        setOpen(true);\r\n        setMovieCode(movieCode)\r\n    }\r\n    const columns = [\r\n        {\r\n            title: 'Mã phim',\r\n            dataIndex: 'maPhim',\r\n            sorter: (a, b) => a.maPhim - b.maPhim,\r\n            sortDirections: ['descend'],\r\n            width: \"15%\",\r\n        },\r\n        {\r\n            title: 'Hình ảnh',\r\n            dataIndex: 'hinhAnh',\r\n            width: \"15%\",\r\n            render: (hinhAnh, index) => {\r\n                return <img key={index} src={hinhAnh} alt={hinhAnh} width={60} height={80} />\r\n            }\r\n        },\r\n        {\r\n            title: 'Tên phim',\r\n            dataIndex: 'tenPhim',\r\n            defaultSortOrder: 'descend',\r\n            width: '25%',\r\n        },\r\n        {\r\n            title: 'Mô tả',\r\n            dataIndex: 'moTa',\r\n            width: '25%',\r\n            render: (moTa, index) => {\r\n                return <Fragment key={index}>\r\n                    {moTa.length > 50 ? moTa.substr(0, 100) + '...' : moTa}\r\n                </Fragment>\r\n            }\r\n        },\r\n        {\r\n            title: 'Chỉnh sửa',\r\n            className: 'adminEdit',\r\n            dataIndex: 'maPhim',\r\n            width: '20%',\r\n            render: (maPhim, index) => {\r\n                return <div key={index} className='adminEdit'>\r\n                    <IconButton color='primary' aria-label=\"primary\" size=\"large\" onClick={() => editMovie(maPhim)}>\r\n                        <EditIcon />\r\n                    </IconButton>\r\n                    <IconButton color='error' aria-label=\"delete\" size=\"large\" onClick={() => onDelete(maPhim)}>\r\n                        <DeleteIcon />\r\n                    </IconButton>\r\n                    <Button variant=\"contained\" color='success' onClick={() => handleClickOpenCreateST(maPhim)}>\r\n                        Tạo lịch chiếu\r\n                    </Button>\r\n                </div>\r\n            }\r\n        },\r\n    ];\r\n    return (\r\n        <div className='adminMovieManager'>\r\n            <h2 className='title'>Quản lý phim</h2>\r\n            <Button className='btn-add' variant=\"contained\" onClick={handleClickOpen}>\r\n                Thêm phim\r\n            </Button>\r\n            {movieCode ? <EditMovie open={open} handleClose={handleClose} movieCode={movieCode} /> : <AddMovie open={open} handleClose={handleClose} />}\r\n            <CreateShowtime open={openCreateST} handleClose={handleCloseCreateST} movieCode={movieCode} />\r\n            <Search\r\n                className='mt-4 mb-4'\r\n                placeholder=\"Nhập tên phim cần tìm\"\r\n                enterButton=\"Tìm kiếm\"\r\n                size=\"large\"\r\n                onSearch={(keyWord) => onSearch(keyWord)}\r\n            />\r\n            <Table pagination={{ defaultPageSize: 5 }} columns={columns} dataSource={data} />\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}