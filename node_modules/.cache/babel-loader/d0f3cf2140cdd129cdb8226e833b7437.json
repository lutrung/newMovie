{"ast":null,"code":"import _defineProperty from\"D:/FrontEnd/Project/newMovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/FrontEnd/Project/newMovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/FrontEnd/Project/newMovie/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import moment from'moment';import React,{Fragment,useEffect,useState}from'react';import{useDispatch}from'react-redux';import{useSelector}from'react-redux';import{getPersonalInfo,updateInfo}from'../../Redux/Actions/UserManagerActions';import Button from'@mui/material/Button';import{Dialog,DialogActions,DialogContent,DialogTitle,TextField}from'@mui/material';import Box from'@mui/material/Box';import{isEmpty}from'lodash';import LogoutIcon from'@mui/icons-material/Logout';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function PersonalInfo(){var _personalInfo$loaiNgu2,_personalInfo$thongTi;var dispatch=useDispatch();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];var personalInfo=useSelector(function(state){return state.UserManagerReducer.personalInfo;});var _useState=useState({taiKhoan:'Loading...',matKhau:'Loading...',hoTen:'Loading...',soDt:0,email:'Loading...',maLoaiNguoiDung:'',maNhom:'Loading...'}),_useState2=_slicedToArray(_useState,2),formInfo=_useState2[0],setFormInfo=_useState2[1];var handleClickOpen=function handleClickOpen(){setOpen(true);};var handleClose=function handleClose(){setOpen(false);};var onChangeInput=function onChangeInput(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;var newFormInfo=_objectSpread(_objectSpread({},formInfo),{},_defineProperty({},name,value));setFormInfo(newFormInfo);};var onSubmit=function onSubmit(){dispatch(updateInfo(formInfo));handleClose();};useEffect(function(){dispatch(getPersonalInfo());},[dispatch]);useEffect(function(){if(!isEmpty(personalInfo)){var _personalInfo$loaiNgu;var newFormInfo={taiKhoan:personalInfo.taiKhoan,matKhau:personalInfo.matKhau,hoTen:personalInfo.hoTen,soDt:personalInfo.soDT,email:personalInfo.email,maLoaiNguoiDung:(_personalInfo$loaiNgu=personalInfo.loaiNguoiDung)===null||_personalInfo$loaiNgu===void 0?void 0:_personalInfo$loaiNgu.maLoaiNguoiDung,maNhom:personalInfo.maNhom};setFormInfo(newFormInfo);}},[personalInfo]);return/*#__PURE__*/_jsxs(\"div\",{className:\"personalInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"personalInfo-left\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"Th\\xF4ng tin t\\xE0i kho\\u1EA3n\"}),/*#__PURE__*/_jsx(\"img\",{className:\"left-avatar\",src:\"https://picsum.photos/200/200\",alt:\"\",style:{borderRadius:'50%'}}),/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped  left-table\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"T\\xE0i kho\\u1EA3n :\"}),/*#__PURE__*/_jsx(\"td\",{children:personalInfo.taiKhoan})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"M\\u1EADt kh\\u1EA9u :\"}),/*#__PURE__*/_jsx(\"td\",{children:personalInfo.matKhau})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"T\\xEAn :\"}),/*#__PURE__*/_jsx(\"td\",{children:personalInfo.hoTen})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"Email :\"}),/*#__PURE__*/_jsx(\"td\",{children:personalInfo.email})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i :\"}),/*#__PURE__*/_jsx(\"td\",{children:personalInfo.soDT})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"Lo\\u1EA1i ng\\u01B0\\u1EDDi d\\xF9ng :\"}),/*#__PURE__*/_jsx(\"td\",{children:(_personalInfo$loaiNgu2=personalInfo.loaiNguoiDung)===null||_personalInfo$loaiNgu2===void 0?void 0:_personalInfo$loaiNgu2.tenLoai})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:\"M\\xE3 nh\\xF3m :\"}),/*#__PURE__*/_jsx(\"td\",{children:personalInfo.maNhom})]})]})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:handleClickOpen,children:\"C\\u1EADp nh\\u1EADt\"}),/*#__PURE__*/_jsx(\"a\",{className:\"left-goback\",href:\"/\",children:/*#__PURE__*/_jsxs(Button,{variant:\"contained\",color:\"inherit\",children:[\"Trang ch\\u1EE7 \\xA0\",/*#__PURE__*/_jsx(LogoutIcon,{})]})}),/*#__PURE__*/_jsxs(Dialog,{fullWidth:true,maxWidth:\"md\",open:open,keepMounted:true,onClose:handleClose,\"aria-describedby\":\"alert-dialog-slide-description\",children:[/*#__PURE__*/_jsx(DialogTitle,{sx:{fontSize:'30px'},children:\"Cập nhật thông tin\"}),/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'start','& .MuiTextField-root':{mb:2,width:'100%'},'& .MuiOutlinedInput-root, .MuiInputLabel-root':{fontSize:'15px'},'& .form-left':{width:'49%'},'& .form-right':{width:'49%'},'& .MuiButton-root':{display:'block',mb:2,fontSize:'15px',backgroundColor:'#d7d7d7',color:'#616161',width:'100%'}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-left\",children:[/*#__PURE__*/_jsx(TextField,{name:\"taiKhoan\",id:\"outlined-basic\",label:\"T\\xE0i kho\\u1EA3n\",variant:\"outlined\",disabled:true,onChange:onChangeInput,value:formInfo.taiKhoan}),/*#__PURE__*/_jsx(TextField,{name:\"matKhau\",id:\"outlined-basic\",label:\"M\\u1EADt kh\\u1EA9u\",variant:\"outlined\",onChange:onChangeInput,value:formInfo.matKhau}),/*#__PURE__*/_jsx(TextField,{name:\"hoTen\",id:\"outlined-basic\",label:\"H\\u1ECD t\\xEAn\",variant:\"outlined\",onChange:onChangeInput,value:formInfo.hoTen}),/*#__PURE__*/_jsx(TextField,{name:\"email\",id:\"outlined-basic\",label:\"Email\",variant:\"outlined\",onChange:onChangeInput,value:formInfo.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-right\",children:[/*#__PURE__*/_jsx(TextField,{name:\"soDt\",id:\"outlined-basic\",label:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",variant:\"outlined\",type:\"number\",onChange:onChangeInput,value:formInfo.soDt}),/*#__PURE__*/_jsx(TextField,{name:\"maLoaiNguoiDung\",id:\"outlined-basic\",label:\"Lo\\u1EA1i ng\\u01B0\\u1EDDi d\\xF9ng\",variant:\"outlined\",disabled:true,value:formInfo.maLoaiNguoiDung==='KhachHang'?'Khách hàng':'Quản trị'}),/*#__PURE__*/_jsx(TextField,{name:\"maNhom\",id:\"outlined-basic\",label:\"M\\xE3 nh\\xF3m\",value:formInfo.maNhom,disabled:true,variant:\"outlined\"})]})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"error\",onClick:handleClose,children:\"H\\u1EE7y\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:onSubmit,type:\"submit\",children:\"C\\u1EADp nh\\u1EADt\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"personalInfo-right\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"L\\u1ECBch s\\u1EED \\u0111\\u1EB7t v\\xE9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"right-table\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{whiteSpace:'nowrap'},children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"STT\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"T\\xEAn phim\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Th\\u1EDDi l\\u01B0\\u1EE3ng\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"T\\xEAn r\\u1EA1p\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Ph\\xF2ng\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Gh\\u1EBF\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Gi\\xE1 v\\xE9\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"M\\xE3 v\\xE9\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Ng\\xE0y \\u0111\\u1EB7t\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_personalInfo$thongTi=personalInfo.thongTinDatVe)===null||_personalInfo$thongTi===void 0?void 0:_personalInfo$thongTi.map(function(item,index){var _item$danhSachGhe,_item$danhSachGhe2,_item$danhSachGhe3;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:index+1}),/*#__PURE__*/_jsx(\"td\",{style:{whiteSpace:'nowrap'},children:item.tenPhim}),/*#__PURE__*/_jsxs(\"td\",{children:[item.thoiLuongPhim,\"p\"]}),/*#__PURE__*/_jsx(\"td\",{style:{whiteSpace:'nowrap'},children:(_item$danhSachGhe=item.danhSachGhe)===null||_item$danhSachGhe===void 0?void 0:_item$danhSachGhe[0].tenHeThongRap}),/*#__PURE__*/_jsx(\"td\",{children:(_item$danhSachGhe2=item.danhSachGhe)===null||_item$danhSachGhe2===void 0?void 0:_item$danhSachGhe2[0].maCumRap}),/*#__PURE__*/_jsx(\"td\",{style:{width:150,minWidth:150},children:(_item$danhSachGhe3=item.danhSachGhe)===null||_item$danhSachGhe3===void 0?void 0:_item$danhSachGhe3.map(function(item,index){return/*#__PURE__*/_jsxs(Fragment,{children:[item.tenGhe,\" \\xA0\"]},index);})}),/*#__PURE__*/_jsx(\"td\",{children:item.giaVe}),/*#__PURE__*/_jsx(\"td\",{children:item.maVe}),/*#__PURE__*/_jsx(\"td\",{children:moment(item.ngayDat).format('DD/MM/YYYY')})]},index);})})]})})]})]});}export default/*#__PURE__*/React.memo(PersonalInfo);","map":{"version":3,"sources":["D:/FrontEnd/Project/newMovie/src/Pages/User/Personal-Info.js"],"names":["moment","React","Fragment","useEffect","useState","useDispatch","useSelector","getPersonalInfo","updateInfo","Button","Dialog","DialogActions","DialogContent","DialogTitle","TextField","Box","isEmpty","LogoutIcon","PersonalInfo","dispatch","open","setOpen","personalInfo","state","UserManagerReducer","taiKhoan","matKhau","hoTen","soDt","email","maLoaiNguoiDung","maNhom","formInfo","setFormInfo","handleClickOpen","handleClose","onChangeInput","event","target","name","value","newFormInfo","onSubmit","soDT","loaiNguoiDung","borderRadius","tenLoai","fontSize","display","justifyContent","alignItems","mb","width","backgroundColor","color","whiteSpace","thongTinDatVe","map","item","index","tenPhim","thoiLuongPhim","danhSachGhe","tenHeThongRap","maCumRap","minWidth","tenGhe","giaVe","maVe","ngayDat","format","memo"],"mappings":"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","sourcesContent":["import moment from 'moment'\r\nimport React, { Fragment, useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { useSelector } from 'react-redux'\r\nimport { getPersonalInfo, updateInfo } from '../../Redux/Actions/UserManagerActions'\r\nimport Button from '@mui/material/Button';\r\nimport { Dialog, DialogActions, DialogContent, DialogTitle, TextField } from '@mui/material'\r\nimport Box from '@mui/material/Box';\r\nimport { isEmpty } from 'lodash'\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nfunction PersonalInfo() {\r\n    const dispatch = useDispatch()\r\n    const [open, setOpen] = React.useState(false);\r\n    const personalInfo = useSelector(state => state.UserManagerReducer.personalInfo)\r\n\r\n    const [formInfo, setFormInfo] = useState({\r\n        taiKhoan: 'Loading...',\r\n        matKhau: 'Loading...',\r\n        hoTen: 'Loading...',\r\n        soDt: 0,\r\n        email: 'Loading...',\r\n        maLoaiNguoiDung: '',\r\n        maNhom: 'Loading...',\r\n    })\r\n    const handleClickOpen = () => {\r\n        setOpen(true);\r\n    };\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n    const onChangeInput = (event) => {\r\n        let { name, value } = event.target\r\n        let newFormInfo = { ...formInfo, [name]: value }\r\n        setFormInfo(newFormInfo)\r\n    }\r\n    const onSubmit = () => {\r\n        dispatch(updateInfo(formInfo))\r\n        handleClose()\r\n    }\r\n    useEffect(() => {\r\n        dispatch(getPersonalInfo())\r\n    }, [dispatch])\r\n    useEffect(() => {\r\n        if (!isEmpty(personalInfo)) {\r\n            let newFormInfo = {\r\n                taiKhoan: personalInfo.taiKhoan,\r\n                matKhau: personalInfo.matKhau,\r\n                hoTen: personalInfo.hoTen,\r\n                soDt: personalInfo.soDT,\r\n                email: personalInfo.email,\r\n                maLoaiNguoiDung: personalInfo.loaiNguoiDung?.maLoaiNguoiDung,\r\n                maNhom: personalInfo.maNhom,\r\n            }\r\n            setFormInfo(newFormInfo)\r\n        }\r\n    }, [personalInfo])\r\n    return (\r\n        <div className='personalInfo'>\r\n            <div className='personalInfo-left'>\r\n                <h2 className='title'>Thông tin tài khoản</h2>\r\n                <img className='left-avatar' src='https://picsum.photos/200/200' alt='' style={{ borderRadius: '50%' }} />\r\n                <table className=\"table table-striped  left-table\">\r\n                    <tbody>\r\n                        <tr>\r\n                            <th scope=\"row\">Tài khoản :</th>\r\n                            <td>{personalInfo.taiKhoan}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Mật khẩu :</th>\r\n                            <td>{personalInfo.matKhau}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Tên :</th>\r\n                            <td>{personalInfo.hoTen}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Email :</th>\r\n                            <td>{personalInfo.email}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Số điện thoại :</th>\r\n                            <td>{personalInfo.soDT}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Loại người dùng :</th>\r\n                            <td>{personalInfo.loaiNguoiDung?.tenLoai}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <th scope=\"row\">Mã nhóm :</th>\r\n                            <td>{personalInfo.maNhom}</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <Button variant=\"contained\" onClick={handleClickOpen}>\r\n                    Cập nhật\r\n                </Button>\r\n                <a className='left-goback' href='/'>\r\n                    <Button variant=\"contained\" color='inherit'>\r\n                        Trang chủ &nbsp;<LogoutIcon />\r\n                    </Button>\r\n                </a>\r\n                <Dialog\r\n                    fullWidth\r\n                    maxWidth='md'\r\n                    open={open}\r\n                    keepMounted\r\n                    onClose={handleClose}\r\n                    aria-describedby=\"alert-dialog-slide-description\"\r\n                >\r\n                    <DialogTitle sx={{ fontSize: '30px' }}>{\"Cập nhật thông tin\"}</DialogTitle>\r\n                    <DialogContent dividers>\r\n                        <Box sx={{\r\n                            display: 'flex',\r\n                            justifyContent: 'space-between',\r\n                            alignItems: 'start',\r\n                            '& .MuiTextField-root': { mb: 2, width: '100%' },\r\n                            '& .MuiOutlinedInput-root, .MuiInputLabel-root': { fontSize: '15px' },\r\n                            '& .form-left': { width: '49%' },\r\n                            '& .form-right': { width: '49%' },\r\n                            '& .MuiButton-root': { display: 'block', mb: 2, fontSize: '15px', backgroundColor: '#d7d7d7', color: '#616161', width: '100%' },\r\n                        }}>\r\n                            <div className='form-left'>\r\n                                <TextField name='taiKhoan' id=\"outlined-basic\" label=\"Tài khoản\" variant=\"outlined\" disabled onChange={onChangeInput} value={formInfo.taiKhoan} />\r\n                                <TextField name='matKhau' id=\"outlined-basic\" label=\"Mật khẩu\" variant=\"outlined\" onChange={onChangeInput} value={formInfo.matKhau} />\r\n                                <TextField name='hoTen' id=\"outlined-basic\" label=\"Họ tên\" variant=\"outlined\" onChange={onChangeInput} value={formInfo.hoTen} />\r\n                                <TextField name='email' id=\"outlined-basic\" label=\"Email\" variant=\"outlined\" onChange={onChangeInput} value={formInfo.email} />\r\n                            </div>\r\n                            <div className='form-right'>\r\n                                <TextField name='soDt' id=\"outlined-basic\" label=\"Số điện thoại\" variant=\"outlined\" type='number' onChange={onChangeInput} value={formInfo.soDt} />\r\n                                <TextField name='maLoaiNguoiDung' id=\"outlined-basic\" label=\"Loại người dùng\" variant=\"outlined\" disabled value={formInfo.maLoaiNguoiDung === 'KhachHang' ? 'Khách hàng' : 'Quản trị'} />\r\n                                <TextField name='maNhom' id=\"outlined-basic\" label=\"Mã nhóm\" value={formInfo.maNhom} disabled variant=\"outlined\" />\r\n                            </div>\r\n                        </Box>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button variant='contained' color='error' onClick={handleClose} >Hủy</Button>\r\n                        <Button variant='contained' color='primary' onClick={onSubmit} type='submit'>Cập nhật</Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n            <div className='personalInfo-right'>\r\n                <h2 className='title'>Lịch sử đặt vé</h2>\r\n                <div className='right-table'>\r\n                    <table className=\"table table-striped\">\r\n                        <thead>\r\n                            <tr style={{ whiteSpace: 'nowrap' }}>\r\n                                <th scope=\"col\">STT</th>\r\n                                <th scope=\"col\">Tên phim</th>\r\n                                <th scope=\"col\">Thời lượng</th>\r\n                                <th scope=\"col\">Tên rạp</th>\r\n                                <th scope=\"col\">Phòng</th>\r\n                                <th scope=\"col\">Ghế</th>\r\n                                <th scope=\"col\">Giá vé</th>\r\n                                <th scope=\"col\">Mã vé</th>\r\n                                <th scope=\"col\">Ngày đặt</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {personalInfo.thongTinDatVe?.map((item, index) => {\r\n                                return <tr key={index}>\r\n                                    <th scope=\"row\">{index + 1}</th>\r\n                                    <td style={{ whiteSpace: 'nowrap' }}>{item.tenPhim}</td>\r\n                                    <td>{item.thoiLuongPhim}p</td>\r\n                                    <td style={{ whiteSpace: 'nowrap' }}>{item.danhSachGhe?.[0].tenHeThongRap}</td>\r\n                                    <td >{item.danhSachGhe?.[0].maCumRap}</td>\r\n                                    <td style={{ width: 150, minWidth: 150 }}>{item.danhSachGhe?.map((item, index) => {\r\n                                        return <Fragment key={index}>\r\n                                            {item.tenGhe} &nbsp;\r\n                                        </Fragment>\r\n                                    })}</td>\r\n                                    <td>{item.giaVe}</td>\r\n                                    <td>{item.maVe}</td>\r\n                                    <td>{moment(item.ngayDat).format('DD/MM/YYYY')}</td>\r\n                                </tr>\r\n                            })}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default React.memo(PersonalInfo)\r\n"]},"metadata":{},"sourceType":"module"}